@using Umbraco.Cms.Web.Common.PublishedModels;
@inherits Umbraco.Cms.Web.Common.Views.UmbracoViewPage<ContentModels.ArticlesPage>
@using ContentModels = Umbraco.Cms.Web.Common.PublishedModels;
@{
    Layout = "Main.cshtml";
}

@await Html.GetBlockGridHtmlAsync(Model, "headerContent")
@await Html.GetBlockGridHtmlAsync(Model, "mainContent")

@functions {
    private string GetRandomPastelColor()
    {
        var colors = new List<string> {
            "#6D8196", "#B2666F", "#C0C0C0", "#F7E6CA", "#CCCCCC", "#84B067"
        };
        var random = new Random();
        return colors[random.Next(colors.Count)];
    }
}

<div class="container py-5">
    <div class="text-center mb-5">
        <h2 class="display-5">Latest Stories</h2>
        <p class="lead text-muted">Browse our collection of articles</p>
    </div>

    @{
        var selection = Model.ChildrenOfType("articlesMain")
            .OrderByDescending(x => x.CreateDate)
            .ToList();
    }

    @if (selection.Any())
    {
        <div class="row g-4">
            @foreach (var item in selection)
            {
                <div class="col-md-6 col-lg-4">
                    <a href="@item.Url()" class="text-decoration-none">
                        <div class="card h-100 border-0 shadow-sm hover-effect">
                            <div class="card-body d-flex align-items-center justify-content-center text-center p-4" style="background-color: @GetRandomPastelColor()">
                                <div>
                                    <h3 class="h5 mb-3">@item.Name()</h3>

                                </div>
                            </div>
                        </div>
                    </a>
                </div>
            }
        </div>
    }
    else
    {
        <div class="alert alert-info text-center">
            No stories available at the moment.
        </div>
    }
</div>